---
title: "Laura_datascanning"
author: "Laura Botzet"
date: "23 April 2019"
output: html_document
---

## Data
```{r}
source("0_helpers.R")
load(file = "data/cleaned_selected.rdata")

```

## Relevant variables
```{r}
data = all_surveys %>%
  select(session,
         age,
         education_years,
         net_income,
         bfi_agree,
         bfi_consc,
         bfi_open,
         bfi_extra,
         bfi_neuro,
         religiosity,
         pregnant_stress,
         duration_relationship_years,
         duration_relationship_month,
         days_with_partner,
         nights_with_partner,
         soi_r_attitude,
         soi_r_behavior,
         soi_r_desire,
         number_sexual_partner,
         contraception_method,
         contraception_approach,
         contraception_method_broad,
         contraception_meeting_partner,
         partner_attractiveness_face,
         partner_attractiveness_body,
         relationship_satisfaction_overall,
         relationship_satisfaction_2,
         relationship_satisfaction_3,
         relationship_problems_R,
         relationship_conflict_R,
         satisfaction_sexual_intercourse,
         reasons_for_exclusion,
         pregnant_trying)

# based on diary:
data_diary = diary %>%
  select(high_libido,
         sex_active, sex_activity_anal_sex, sex_activity_bdsm_dom, sex_activity_bdsm_sub,
         sex_activity_cuddling, sex_activity_cunnilingus, sex_activity_cybersex, sex_activity_dirty_talk,
         sex_activity_fellatio, sex_activity_kissing,  sex_activity_masturbated_by_partner,
         sex_activity_masturbated_partner, sex_activity_masturbation, sex_activity_other,
         sex_activity_phone_skype_sex, sex_activity_pornography, sex_activity_sex, sex_activity_touch_other, 
         sex_activity_toys, sex_activity_unclear,  sex_other, sex_solo, sex_unclear,
         days_done)
```

## Reasons for Exclusion:
* missing data (not finishing the initial survey) --> "didnt_finish_personality" is for finishing demographic survey and initial survey
* menopausal --> "menopausal"
* older than 50 --> "older_than_50"
* pregnant or breastfeeding --> "pregnant" and "breast_feeding"
* use of one of the following contraceptive methods: abandonment of penetrative sexual intercourse, morning-after pill, breastfeeding, I am infertile, my partner is infertile, I am sterilized, my partner is sterilized, other
* homosexuality --> "not_heterosexual_female"
* use of medication including sex hormones in the last three months --> "sex_hormones"

* use of one of the following contraceptive methods: abandonment of penetrative sexual intercourse, morning-after pill, breastfeeding, I am infertile, my partner is infertile, I am sterilized, my partner is sterilized, other
```{r}
data = data %>% 
  mutate(reasons_for_exclusion = str_c(reasons_for_exclusion,
                                          if_else(
                                            contraception_method %contains% "barrier_no_penetrative_sex" |
                                              contraception_method %contains% "hormonal_morning_after_pill" |
                                              contraception_method %contains% "breast_feeding" |
                                              contraception_method %contains% "infertile" |
                                                    #captures both self infertile and partner infertile
                                              contraception_method %contains% "sterilised"
                                                    #captures both self sterilised and partner sterilised
                                            , "contraceptive_method_exclusion, ", "", "")))
# other fehlt hier noch!
table(data$reasons_for_exclusion %contains% "contraceptive_method_exclusion")
test = data %>% filter(reasons_for_exclusion %contains% "contraceptive_method_exclusion")
test$contraception_method
```

* incongruent information about current contraceptive method and method used in the last three months
```{r}

```

* participants, who do not want to avoid pregnancy --> based on "pregnant_trying" > 1
```{r}
data 
```

